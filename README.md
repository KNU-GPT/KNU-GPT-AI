# ğŸ§  RAG LLM ì„œë²„
## ğŸ” ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰(Embedding Search) ê°œìš”
KNU GPT ì‹œìŠ¤í…œì˜ AI ëª¨ë“ˆì€ ì‚¬ìš©ìì˜ ìì—°ì–´ ì§ˆì˜ì™€ ë°ì´í„°ë² ì´ìŠ¤ ë‚´ì˜ ë¬¸ì„œë¥¼ ì˜ë¯¸ ë²¡í„°(Embedding) ë¡œ ë³€í™˜í•˜ì—¬ ê²€ìƒ‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.
í‚¤ì›Œë“œ ê¸°ë°˜ ê²€ìƒ‰ì´ ì•„ë‹Œ ë¬¸ì¥ì˜ ì˜ë¯¸Â·ë¬¸ë§¥Â·ìœ ì‚¬ë„ ê¸°ë°˜ ê²€ìƒ‰ì„ ì§€ì›í•˜ë©°, ì§ˆì˜ ì˜ë„ì— ë§ëŠ” ê²°ê³¼ë¥¼ ë†’ì€ ì •í™•ë„ë¡œ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.

## ğŸ§¬ ì„ë² ë”© ëª¨ë¸ (Embedding Model)

í•œêµ­ì–´ ë¬¸ë§¥ ì˜ë¯¸ë¥¼ ì •ë°€ ë°˜ì˜í•˜ê¸° ìœ„í•´ BM-K/KoSimCSE-roberta-multitask ëª¨ë¸ì„ ì‚¬ìš©
ì´ ëª¨ë¸ì€ ì…ë ¥ ë¬¸ì¥ì„ ë²¡í„°ë¡œ ì„ë² ë”©í•˜ê³ , L2 ì •ê·œí™”ë¥¼ ê±°ì¹œ ë’¤ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ë¡œ ë¹„êµ
ëª¨ë“  ë°ì´í„° í•­ëª©ì˜ title ê°’ì„ ë²¡í„°í™”í•˜ì—¬ ì €ì¥í•˜ë©°, ê²€ìƒ‰ ì‹œ ì‚¬ìš©ì ì§ˆì˜ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë²¡í„°í™”
â¡ï¸ ì´ë¥¼ í†µí•´ "ì¥í•™ê¸ˆ ì‹ ì²­ ì¡°ê±´ ì•Œë ¤ì¤˜" ê°™ì€ ì§ˆì˜ì— ëŒ€í•´
"êµë‚´ ì¥í•™ê¸ˆ ì„ ë°œ ê¸°ì¤€", "ì„±ì ìš°ìˆ˜ ì¥í•™ê¸ˆ ì•ˆë‚´" ë“±ì´ ì˜ë¯¸ ìœ ì‚¬ë„ë¡œ ê²€ìƒ‰ë¨
(ë‹¨ìˆœ í‚¤ì›Œë“œ ë§¤ì¹­ ë°©ì‹ìœ¼ë¡œëŠ” ê²€ìƒ‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆëŠ” í•­ëª©ë„ ê²€ìƒ‰ ê°€ëŠ¥)

## ğŸ—‚ ë°ì´í„° ì €ì¥ êµ¬ì¡° (JSON + FAISS)
vector_tree_db.json  â†’ ì‹¤ì œ ì›ë³¸ ë°ì´í„° + ê° í•­ëª©ì˜ ë²¡í„° ê°’ í¬í•¨
index_tree_db.json   â†’ ë²¡í„° ì¸ë±ìŠ¤ ë²ˆí˜¸ (ë²¡í„° ìì²´ëŠ” ì—†ìŒ)
faiss.index          â†’ ëª¨ë“  ë²¡í„° ë°ì´í„° ì €ì¥ (FAISS ì¸ë±ìŠ¤ íŒŒì¼)

### íŒŒì¼ëª…	ì—­í• 	íŠ¹ì§•
- vector_tree_db.json	ì›ë³¸ ë°ì´í„° + ë¬¸ì¥ ë²¡í„° í¬í•¨	ê°œë°œ/í•™ìŠµ ì´ˆê¸° ë‹¨ê³„ì—ì„œ ì‚¬ìš©
- index_tree_db.json	FAISS ì¸ë±ìŠ¤ ë²ˆí˜¸ ë§¤í•‘ ì •ë³´	ì‹¤ì œ ê²€ìƒ‰ ìš”ì²­ ì‹œ ì‚¬ìš©
- faiss.index	ë²¡í„° ì¸ë±ìŠ¤ íŒŒì¼	ëŒ€ìš©ëŸ‰ ë²¡í„° ê²€ìƒ‰ ì „ìš©

## â¡ï¸ ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ì„±ëŠ¥ ë° ë©”ëª¨ë¦¬ ìµœì í™”ë¥¼ ìœ„í•´
index_tree_db.json + faiss.index ë§Œ ì‚¬ìš©í•˜ì—¬ ê²€ìƒ‰ ìˆ˜í–‰

## âš™ï¸ FAISS ê²€ìƒ‰ ì—”ì§„ êµ¬ì¡°
ì¸ë±ìŠ¤ íƒ€ì… : IndexFlatIP
ê±°ë¦¬ ê³„ì‚° : Inner Product (ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê¸°ë°˜)
ë²¡í„° ì •ê·œí™” : L2 Normalization ì ìš©
íŠ¹ì§• : ê³ ì† ê²€ìƒ‰, ì •í™•í•œ ì˜ë¯¸ ê¸°ë°˜ ë¹„êµ, GPU í™•ì¥ ìš©ì´
IndexFlatIP êµ¬ì¡°ëŠ” ì •ê·œí™”ëœ ë²¡í„°ì— ëŒ€í•´
Inner Product ë°©ì‹ìœ¼ë¡œ ê³„ì‚° â†’ Cosine Similarityì™€ ë™ì¼í•œ íš¨ê³¼

## ğŸ”„ ë²¡í„° ê²€ìƒ‰ ì²˜ë¦¬ íë¦„
```
ì‚¬ìš©ì ì§ˆì˜ ë¬¸ì¥
      â†“
ì„ë² ë”© ëª¨ë¸ë¡œ ë²¡í„° ë³€í™˜
      â†“
FAISS Index ê²€ìƒ‰ (ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê¸°ë°˜)
      â†“
ì„ê³„ê°’ ì´ìƒì˜ í•­ëª© í•„í„°ë§ ë° ì •ë ¬
      â†“
í•´ë‹¹ ì¸ë±ìŠ¤ ë²ˆí˜¸ë¡œ ì›ë³¸ ë°ì´í„° ë³µì›
      â†“
ìµœì¢… ì‘ë‹µ ë°˜í™˜
```

## ğŸš€ ì„¤ê³„ ì˜ë„ ë° ì¥ì 
- ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰	-> ë¬¸ë§¥ì  ì˜ë¯¸ ì´í•´ ê°€ëŠ¥ (í‚¤ì›Œë“œ ì˜ì¡´ë„ â†“)
- í™•ì¥ì„± ë†’ì€ êµ¬ì¡°	-> ìƒˆë¡œìš´ ë°ì´í„° ì¶”ê°€ ì‹œ ë²¡í„°ë§Œ ê°±ì‹ í•˜ë©´ ë¨
- ë©”ëª¨ë¦¬ íš¨ìœ¨ì„± -> ìš´ì˜ í™˜ê²½ì—ì„œ ë²¡í„° ì „ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ì§€ ì•ŠìŒ
- ê³ ì† ê²€ìƒ‰ -> FAISS ê¸°ë°˜ ê³ ì† ìœ ì‚¬ë„ ë¹„êµ (ì‹¤ì‹œê°„ ê²€ìƒ‰ ì í•©)
- í•œêµ­ì–´ íŠ¹í™” -> í•œêµ­ì–´ ë¬¸ì¥ ì˜ë¯¸ ì´í•´ ë° Semantic Retrieval ì§€ì›
